import Stripe from "stripe"; export default async function h(req,res){ if(req.method!=="POST") return res.status(405).end(); const s=new Stripe(process.env.STRIPE_SECRET_KEY!,{apiVersion:"2024-04-10"}); const ses=await s.checkout.sessions.create({mode:"subscription",payment_method_types:["card"],line_items:[{price:process.env.STRIPE_PRICE_ID!,quantity:1}],success_url:`${process.env.NEXT_PUBLIC_BASE_URL}/lab?success=true`,cancel_url:`${process.env.NEXT_PUBLIC_BASE_URL}/lab?canceled=true`}); res.status(200).json({url:ses.url});}
