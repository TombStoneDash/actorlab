import { supabase } from "@/lib/supabaseClient"; export default async function h(req,res){ const email=(req.query.email||req.headers["x-user-email"]) as string; if(!email) return res.status(400).json({error:"Missing email"}); const {data,error}=await supabase.from("users").select("email,tier,subscription_status").eq("email", email).single(); if(error) return res.status(404).json({error:"Not found"}); res.status(200).json({user:data}); }
